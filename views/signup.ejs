<!-- views/signup.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create account • Reviews &amp; Marketing</title>
     <%- include('partials/head') %>
     <style>
       /* Mobile-specific optimizations for signup page */
       @media (max-width: 768px) {
         .auth-grid {
           min-height: auto;
           padding: 20px 16px;
         }
         
         .auth-card {
           margin: 20px auto;
           padding: 24px 20px;
         }
         
         .auth-card .brand {
           margin-bottom: 8px;
         }
         
         .auth-card .brand img {
           height: 24px;
         }
         
         .form-container h1 {
           font-size: 28px;
           margin-bottom: 6px;
         }
         
         .form-container p.sub-headline {
           font-size: 14px;
           margin-bottom: 24px;
         }
         
         .form-container .form-field {
           margin-bottom: 16px;
         }
         
         .form-container label {
           font-size: 13px;
           margin-bottom: 6px;
         }
         
         .form-container input {
           padding: 12px;
           font-size: 16px;
         }
         
         .form-container .button-container {
           margin-top: 8px;
         }
         
         .form-container .primary-action {
           padding: 14px 24px;
           font-size: 15px;
         }
         
         .form-container .form-footer-link {
           margin-top: 20px;
           font-size: 14px;
         }
         
         /* Reduce spacing between elements */
         .form-container > * + * {
           margin-top: 16px;
         }
         
         .form-container .form-field + .form-field {
           margin-top: 12px;
         }
       }
     </style>
</head>
<body class="auth-bg">
    <%- include('partials/header') %>
    <div class="auth-grid">
      <div class="auth-left auth-photo"></div>
      <div class="auth-right">
        <div class="base-card auth-card dark-card">
        <div class="brand"><img src="/logos/main-logo.png" alt="Reviews &amp; Marketing" /></div>
        <div class="form-container">
          <h1>Create your account</h1>
          <p class="sub-headline">Start collecting more 5‑star reviews</p>
          <% if (typeof error !== 'undefined' && error) { %>
              <div class="error"><%= error %></div>
          <% } %>
            <form action="/auth/signup" method="POST" class="form-grid">
              <input type="hidden" name="_csrf" value="<%= (typeof csrfToken !== 'undefined' ? csrfToken : '') %>">
                <div class="form-field">
                  <label for="businessName">Business Name</label>
                  <input id="businessName" class="input" type="text" name="businessName" placeholder="Acme Dental" required>
                </div>
                <div class="form-field">
                  <label for="email">Email</label>
                  <input id="email" class="input" type="email" name="email" placeholder="you@business.com" required>
                </div>
                <div class="form-field">
                  <label for="phone">Phone Number</label>
                  <input id="phone" class="input" type="tel" name="phone" placeholder="(555) 123-4567" inputmode="numeric" autocomplete="tel" required>
                </div>
                <div class="form-field">
                  <label for="password">Password</label>
                  <input id="password" class="input" type="password" name="password" placeholder="••••••••" required>
                </div>
                <div class="form-field">
                  <label for="confirmPassword">Confirm Password</label>
                  <input id="confirmPassword" class="input" type="password" name="confirmPassword" placeholder="••••••••" required>
                </div>
                <div class="form-field button-container"><button class="btn-primary primary-action" type="submit">Sign Up</button></div>
            </form>
          <div class="form-footer-link"><span>Already have an account?</span> <a class="link-accent" href="/login">Log in</a></div>
        </div>
        </div>
      </div>
    </div>
     <%- include('partials/footer') %>
     <script>
       // Dynamic US phone mask: (555) 123-4567
       (function(){
         var el = document.getElementById('phone');
         if (!el) return;
         function formatPhone(value){
           var digits = (value || '').replace(/\D/g, '').slice(0, 10);
           var p1 = digits.slice(0,3);
           var p2 = digits.slice(3,6);
           var p3 = digits.slice(6,10);
           if (digits.length <= 3) return p1 ? '(' + p1 : '';
           if (digits.length <= 6) return '(' + p1 + ') ' + p2;
           return '(' + p1 + ') ' + p2 + '-' + p3;
         }
         function onInput(){
           var start = el.selectionStart || 0;
           var before = el.value;
           el.value = formatPhone(before);
           try { el.setSelectionRange(el.value.length, el.value.length); } catch(_) {}
         }
         ['input','change','blur','keyup','paste'].forEach(function(evt){ el.addEventListener(evt, onInput); });
         // Initialize on load if prefilled by browser
         onInput();
       })();
     </script>
</body>
</html>
